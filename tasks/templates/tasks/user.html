{% load static %} 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Task Manager</title>
    <link rel="stylesheet" href="{% static 'tasks/user.css' %}">
</head>
<body>
    <div class="login-container">
        <div class="login-header">
            <h2>Welcome Back</h2>
            <p>Please sign in to your account</p>
        </div>

        <form method="post" id="loginForm">
            {% csrf_token %}
            
            <!-- Django form errors will be displayed here -->
            {% if form.errors %}
                <div class="error-message">
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}
                            <div>{{ error }}</div>
                        {% endfor %}
                    {% endfor %}
                </div>
            {% endif %}

            <!-- Custom form fields with better styling -->
            <div class="form-group">
                <label for="{{ form.username.id_for_label }}">
                    Username <span class="required">*</span>
                </label>
                {{ form.username }}
            </div>

            <div class="form-group">
                <label for="{{ form.password.id_for_label }}">
                    Password <span class="required">*</span>
                </label>
                {{ form.password }}
            </div>

            <button type="submit" class="submit-btn">
                Sign In
            </button>
        </form>

        <div class="register-link">
            <p>Don't have an account? <a href="{% url 'register' %}">Create Account</a></p>
        </div>
    </div>

    <script>
        // Form submission handling
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            const form = this;
            const submitBtn = form.querySelector('.submit-btn');
            
            // Add loading state
            form.classList.add('loading');
            submitBtn.textContent = 'Signing In...';
            
            // Basic validation
            const username = form.querySelector('input[name="username"]').value.trim();
            const password = form.querySelector('input[name="password"]').value;
            
            if (!username || !password) {
                e.preventDefault();
                form.classList.remove('loading');
                submitBtn.textContent = 'Sign In';
                alert('Please fill in all required fields');
                return;
            }
        });

        // Enhanced input styling
        document.querySelectorAll('input[type="text"], input[type="password"], input[type="email"]').forEach(input => {
            input.addEventListener('input', function() {
                if (this.value.trim() !== '') {
                    this.classList.add('has-value');
                } else {
                    this.classList.remove('has-value');
                }
            });
        });
    </script>
</body>
</html>